---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
library (Census2010Persons)

knitr::opts_chunk$set (
	collapse = TRUE,
	comment = "#",
	fig.path = "man/figures/README-",
	out.width = "100%"
	)
```

# Census2010Persons

<!-- badges: start -->

[![build](https://github.com/AlexandreLoures/Census2010Persons/actions/workflows/main.yml/badge.svg)](https://github.com/AlexandreLoures/Census2010Persons/actions)
[![CRAN\_Status\_Badge](https://www.r-pkg.org/badges/version/Census2010Persons)](https://cran.r-project.org/package=Census2010Persons)
[![lifecycle](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html)
[![License: Mit](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Github commit](https://img.shields.io/github/last-commit/AlexandreLoures/Census2010Persons)](https://github.com/AlexandreLoures/Census2010Persons/commit/main)
[![](https://cranlogs.r-pkg.org/badges/grand-total/Census2010Persons?color=blue)](https://cran.r-project.org/package=Census2010Persons)
<!-- badges: end -->

# Installation

To install the `package`, one of the two standard methods for installing `packages`in R can be adopted. Directly through the [cran](https://cran.r-project.org/package=Census2010Persons) (choosing the closest repository):

``` r
install.packages ("Census2010Persons")
```

Or even using the command below. In the latter case, the latest version of the `package` will be installed.

``` r
# install.packages ("devtools")
devtools::install_github ("AlexandreLoures/Census2010Persons")
```
# The update_data command

To obtain the most up-to-date version of the data on the new coronavirus (COVID-19) pandemic in Brazil, use the `update_data` command. Data is updated daily on [Github (Dev) version](https://github.com/AlexandreLoures/covid19brazil), however, the [CRAN version](https://cran.r-project.org/package=covid19brazil) of the `covid19brazil` package is updated every month or two. **Don't forget to restart the R session to load the new data**.

```r
update_data ()
```

# Using the package

```{r}
data ("brazil_total")

head (brazil_total)
```

# Download, read and analyze the microdata

The purpose of this section is to analyze data on cases, deaths, proportions and geographic distribution on the COVID-19 pandemic in Brazil, made available by the [Ministerio da Saude - Sistema Unico de Saude (SUS)](https://www.gov.br/saude/pt-br). Data are available as of 2020-01-30, when the first suspected case appeared in Brazil.

## Cases accumulated per 100,000 inhabitants

The graph below shows the number of cases accumulated in each Federative Unit of Brazil per 100,000 inhabitants (data for the day 2022-12-26).

Data source: [Ministerio da Saude - Sistema Unico de Saude (SUS)](https://www.gov.br/saude/pt-br)

<img src="man/figures/mapCases.png" width="100%" /> \ 

Below is the graph for the number of cases accumulated per 100,000 inhabitants for each of the five macro-regions in Brazil, information until the 2022-12-26.

<img src="man/figures/cases100.png" width="100%" /> \

The next graph refers to the number of accumulated cases per 100,000 inhabitants for each of the 853 municipalities in the state Minas Gerais (data for the day 2022-12-26).

<img src="man/figures/mgCases100.png" width="100%" />

## Deaths accumulated per 100,000 inhabitants

In turn, the next graph shows the number of deaths accumulated in each Federative Unit of Brazil per 100,000 inhabitants (data for the day 2022-12-26).

Data source: [Ministerio da Saude - Sistema Unico de Saude (SUS)](https://www.gov.br/saude/pt-br)

<img src="man/figures/mapDeaths.png" width="100%" /> \ 

The graph below shows the number of accumulated deaths per 100,000 inhabitants for each of Brazil's five macro-regions, information until the 2022-12-26.

<img src="man/figures/deaths100.png" width="100%" /> \ 

The next graph refers to the number of accumulated deaths per 100,000 inhabitants for each of the 853 municipalities in the state of Minas Gerais (data for the day 2022-12-26).

<img src="man/figures/mgDeaths100.png" width="100%" />

<!-- 

```r
library (ploty)

plot_ly(data = brazil_total,
        x = ~ date,
        y = ~home_confinement, 
        name = 'Home Confinement', 
        fillcolor = '#FDBBBC',
        type = 'scatter',
        mode = 'none', 
        stackgroup = 'one') %>%
  add_trace( y = ~ hospitalized_with_symptoms, 
             name = "Hospitalized with Symptoms",
             fillcolor = '#E41317') %>%
  add_trace(y = ~intensive_care, 
                name = 'Intensive Care', 
                fillcolor = '#9E0003') %>%
  layout(title = "Number of cases accumulated by region",
         legend = list(x = 0.8, y = 0.9),
         yaxis = list(title = "Number of Cases"),
         xaxis = list(title = "Source: Ministerio da Saude (Sistema Unico de Saude"))
```

<img src="man/figures/accumCases.png" width="100%" />

```r
p <- plot_ly(data = brazil_total,
        x = ~ date,
        y = ~home_confinement, 
        name = 'Home Confinement', 
        fillcolor = '#FDBBBC',
        type = 'scatter',
        mode = 'none', 
        stackgroup = 'one') %>%
  add_trace( y = ~ hospitalized_with_symptoms, 
             name = "Hospitalized with Symptoms",
             fillcolor = '#E41317') %>%
  add_trace(y = ~intensive_care, 
                name = 'Intensive Care', 
                fillcolor = '#9E0003') %>%
  layout(title = "Number of deaths accumulated by region",
         legend = list(x = 0.8, y = 0.9),
         yaxis = list(title = "Number of Deaths"),
         xaxis = list(title = "Source: Ministerio da Saude (Sistema Unico de Saude"))
```

<img src="man/figures/accumDeaths.png" width="100%" />

-->

## Moving averages and forecast (Polynomial interpolation)

<!--
```r
library (ploty)

plot_ly(data = brazil_total,
        x = ~ date,
        y = ~home_confinement, 
        name = 'Home Confinement', 
        fillcolor = '#FDBBBC',
        type = 'scatter',
        mode = 'none', 
        stackgroup = 'one') %>%
  add_trace( y = ~ hospitalized_with_symptoms, 
             name = "Hospitalized with Symptoms",
             fillcolor = '#E41317') %>%
  add_trace(y = ~intensive_care, 
                name = 'Intensive Care', 
                fillcolor = '#9E0003') %>%
  layout(title = "Number of cases accumulated by region",
         legend = list(x = 0.8, y = 0.9),
         yaxis = list(title = "Number of Cases"),
         xaxis = list(title = "Source: Ministerio da Saude (Sistema Unico de Saude"))
```
-->
The graph below presents the data for the number of daily new Covid-19 cases, respectively, for Brazil and for the municipality of Sao Joao del Rey (belonging to the state of Minas Gerais), a 3-day moving average, a 7-day moving average and the forecast, obtained by polynomial interpolation of degree 5, covering the entire period plus 15 days (last day of observed data is 2022-12-26).

<img src="man/figures/predCases.png" width="100%" /> \ 

<img src="man/figures/predCases_sjdr.png" width="100%" /> \ 

<!--

```r
p <- plot_ly(data = brazil_total,
        x = ~ date,
        y = ~home_confinement, 
        name = 'Home Confinement', 
        fillcolor = '#FDBBBC',
        type = 'scatter',
        mode = 'none', 
        stackgroup = 'one') %>%
  add_trace( y = ~ hospitalized_with_symptoms, 
             name = "Hospitalized with Symptoms",
             fillcolor = '#E41317') %>%
  add_trace(y = ~intensive_care, 
                name = 'Intensive Care', 
                fillcolor = '#9E0003') %>%
  layout(title = "Number of deaths accumulated by region",
         legend = list(x = 0.8, y = 0.9),
         yaxis = list(title = "Number of Deaths"),
         xaxis = list(title = "Source: Ministerio da Saude (Sistema Unico de Saude"))
```
-->

The next graph presents the data for the number of new daily deaths caused by Covid-19, respectively, for Brazil and for the municipality of Sao Joao del Rey (belonging to the state of Minas Gerais), a 3-day moving average, a 7-day moving average and the forecast, obtained by polynomial interpolation of degree 5, covering the entire period plus 15 days (last day of observed data is 2022-12-26).

<img src="man/figures/predDeaths.png" width="100%" /> \ 

<img src="man/figures/predDeaths_sjdr.png" width="100%" />
